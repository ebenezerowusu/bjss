<!doctype html><html lang="en">
<!-- Mirrored from www.bjss.com/engineering-insights/de-mystifying-compilers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jan 2023 11:43:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>De-Mystifying Compilers</title>
    <link rel="shortcut icon" href="../hubfs/BJSSfav-01.png">
    <meta name="description" content="De-Mystifying Compilers">
    
    
    
    
    
    
    
    
    
    
    
    
    <meta property="og:description" content="De-Mystifying Compilers">
    <meta property="og:title" content="De-Mystifying Compilers">
    <meta name="twitter:description" content="De-Mystifying Compilers">
    <meta name="twitter:title" content="De-Mystifying Compilers">

    

    
    <style>
a.cta_button{-moz-box-sizing:content-box !important;-webkit-box-sizing:content-box !important;box-sizing:content-box !important;vertical-align:middle}.hs-breadcrumb-menu{list-style-type:none;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px}.hs-breadcrumb-menu-item{float:left;padding:10px 0px 10px 10px}.hs-breadcrumb-menu-divider:before{content:'›';padding-left:10px}.hs-featured-image-link{border:0}.hs-featured-image{float:right;margin:0 0 20px 20px;max-width:50%}@media (max-width: 568px){.hs-featured-image{float:none;margin:0;width:100%;max-width:100%}}.hs-screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px}
</style>

<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/template_assets/47365676184/1622442584700/BJSS_May2021/css/layout.min.css">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/template_assets/47365604017/1671180309381/BJSS_May2021/css/main.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:400,700|Lato:400,700&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Catamaran:wght@100;200;300;400;500;600;700;800;900&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:wght@700;900&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@800&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800%7CRaleway:100,200,300,400,500,600,700,800,900%7CDroid+Serif:400,700%7CMontserrat:100,200,300,400,500,600,700,800,900%7CLato:300,400,700,900%7CAnton%7CBarlow+Condensed:100,200,300,400,500,600,700%7CSource+Code+Pro:300,400,500,600,700">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/template_assets/47365604651/1630588080644/BJSS_May2021/css/theme-overrides.min.css">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/module_assets/52098159278/1638279844591/module_52098159278_language_switcher.min.css">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/module_assets/48374514008/1642518516330/module_48374514008_Engineering_Insights_Post_Banner.min.css">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/module_assets/48372652123/1664435298183/module_48372652123_Engineering_Insights_Post_Content.min.css">
<link rel="stylesheet" href="../hs-fs/hub/9399653/hub_generated/module_assets/47366505811/1642518516986/module_47366505811_Follow_Us.min.css">
    

    

<meta name="viewport" content="width=device-width, initial-scale=1">
<script id="Cookiebot" src="../../consent.cookiebot.com/uc.js" data-cbid="1e8015ed-e92b-4a8a-81af-cd363b75ae3f" data-blockingmode="auto" type="text/javascript"></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KKPDZ5X');</script>
<!-- End Google Tag Manager -->
<script>
(function(g,e,o,t,a,r,ge,tl,y,s){
g.getElementsByTagName(o)[0].insertAdjacentHTML('afterbegin','<style id="georedirect1630578272721style">body{opacity:0.0 !important;}</style>');
s=function(){g.getElementById('georedirect1630578272721style').innerHTML='body{opacity:1.0 !important;}';};
t=g.getElementsByTagName(o)[0];y=g.createElement(e);y.async=true;
y.src='https://g792337340.co/gr?id=-Mia1T_TRP_QsDX3xGqm&refurl='+g.referrer+'&winurl='+encodeURIComponent(window.location);
t.parentNode.insertBefore(y,t);y.onerror=function(){s()};
georedirect1630578272721loaded=function(redirect){var to=0;if(redirect){to=5000};
setTimeout(function(){s();},to)};
})(document,'script','head');
</script>
<meta name="google-site-verification" content="XE271XJfF68am7oHm2x4veUqLyGeIVskmS7V3t-JVh0">

<link rel="amphtml" href="de-mystifying-compilers3d9f.html?hs_amp=true">

<meta property="og:image" content="https://www.bjss.com/hubfs/Feature_De-mystifying-compliers.jpg#keepProtocol">
<meta property="og:image:width" content="866">
<meta property="og:image:height" content="640">

<meta name="twitter:image" content="https://www.bjss.com/hubfs/Feature_De-mystifying-compliers.jpg#keepProtocol">


<meta property="og:url" content="https://www.bjss.com/engineering-insights/de-mystifying-compilers">
<meta name="twitter:card" content="summary_large_image">

<link rel="canonical" href="de-mystifying-compilers.html">

<meta property="og:type" content="article">
<link rel="alternate" type="application/rss+xml" href="rss.xml">
<meta name="twitter:domain" content="www.bjss.com">
<script src="../../platform.linkedin.com/in.js" type="text/javascript">
    lang: en_US
</script>

<meta http-equiv="content-language" content="en">






    
  <meta name="generator" content="HubSpot"></head>
  <body>
    <div class="body-wrapper   hs-content-id-50034951479 hs-blog-post hs-blog-id-48313963830">
      
      <div data-global-resource-path="BJSS_May2021/templates/partials/header.html"><header class="header">
  <div class="main-header">
    <div class="header__container">
      <div class="headerLogo">
        
        <div id="hs_cos_wrapper_header_logo" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-logo" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module">
  



  <span id="hs_cos_wrapper_header_logo_hs_logo_widget" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_logo" style="" data-hs-cos-general-type="widget" data-hs-cos-type="logo"><a href="../index.html" id="hs-link-header_logo_hs_logo_widget" style="border-width:0px;border:0px;"><img src="../hubfs/bjss_logo_25_Blue%26Navy%20(RGB).svg" class="hs-image-widget " style="width:100px;border-width:0px;border:0px;" width="100" alt="bjss_logo_25_Blue&amp;Navy (RGB)" title="bjss_logo_25_Blue&amp;Navy (RGB)"></a></span>
</div>
      </div>
      <div class="headerNavigation">
        <div class="custom-menu-primary">
          <span id="hs_cos_wrapper_header_menu" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_menu" style="" data-hs-cos-general-type="widget" data-hs-cos-type="menu"><div id="hs_menu_wrapper_header_menu" class="hs-menu-wrapper active-branch no-flyouts hs-menu-flow-horizontal" role="navigation" data-sitemap-name="default" data-menu-id="47367390570" aria-label="Navigation Menu">
 <ul role="menu" class="active-branch">
  <li class="hs-menu-item hs-menu-depth-1 hs-item-has-children" role="none"><a href="../about/index.html" aria-haspopup="true" aria-expanded="false" role="menuitem">About BJSS</a>
   <ul role="menu" class="hs-menu-children-wrapper">
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../our-work.html" role="menuitem">Our Work</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../community/index.html" role="menuitem">BJSS in the Community</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../governance/index.html" role="menuitem">Governance</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../our-sustainability.html" role="menuitem">Our Sustainability</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../greenfield.html" role="menuitem">Green Field</a></li>
   </ul></li>
  <li class="hs-menu-item hs-menu-depth-1 hs-item-has-children" role="none"><a href="../services/index.html" aria-haspopup="true" aria-expanded="false" role="menuitem">Our Services</a>
   <ul role="menu" class="hs-menu-children-wrapper">
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../strategy-and-transformation.html" role="menuitem">Strategy &amp; Transformation</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../design/index.html" role="menuitem">Design &amp; Innovation</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../technology-engineering/index.html" role="menuitem">Technology &amp; Engineering</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../managed-service/index.html" role="menuitem">Managed Service</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../low-code-and-automation.html" role="menuitem">Low Code &amp; Automation</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../data/index.html" role="menuitem">Data &amp; AI</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../cloud/index.html" role="menuitem">Cloud &amp; Platform</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../cyber-security.html" role="menuitem">Cyber Security</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../sustainability.html" role="menuitem">Sustainability</a></li>
   </ul></li>
  <li class="hs-menu-item hs-menu-depth-1 hs-item-has-children" role="none"><a href="../industries/index.html" aria-haspopup="true" aria-expanded="false" role="menuitem">Your Industry</a>
   <ul role="menu" class="hs-menu-children-wrapper">
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../energy-commodities-utilities.html" role="menuitem">Energy, Commodities &amp; Utilities</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../financial-services.html" role="menuitem">Financial Services</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../health/index.html" role="menuitem">Health &amp; Social Care</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../public/index.html" role="menuitem">Public Sector</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../retail/index.html" role="menuitem">Retail &amp; Consumer Markets</a></li>
   </ul></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../enterprise-agile.html" role="menuitem">Enterprise Agile®</a></li>
  <li class="hs-menu-item hs-menu-depth-1 hs-item-has-children active-branch" role="none"><a href="../insights/index.html" aria-haspopup="true" aria-expanded="false" role="menuitem">Insights</a>
   <ul role="menu" class="hs-menu-children-wrapper active-branch">
    <li class="hs-menu-item hs-menu-depth-2 active active-branch" role="none"><a href="../engineering-insights.html" role="menuitem">Engineering Insights</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../industry-insights.html" role="menuitem">Industry Insights</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../news.html" role="menuitem">News Centre</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../events/index.html" role="menuitem">Events</a></li>
    <li class="hs-menu-item hs-menu-depth-2" role="none"><a href="../future-of-retail/index.html" role="menuitem">Future of Retail</a></li>
   </ul></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../careers.html" role="menuitem">Careers</a></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../contact/index.html" role="menuitem">Contact</a></li>
 </ul>
</div></span>
        </div>
        <div class="custom-menu-primary">
          <div id="hs_cos_wrapper_module_16279825775607" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-language_switcher" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><span id="hs_cos_wrapper_module_16279825775607_" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_language_switcher" style="" data-hs-cos-general-type="widget" data-hs-cos-type="language_switcher"></span></div>
        </div>
        <div class="search-icon">
          <span class="search-icon-in"></span>
        </div>
        <div class="mobile-navigation">
          <div class="mobile-navigation-inner">
            <span class="mobile-trigger"></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="search-outer">
    <div class="header__container">
      <div class="hs-search-field">
        <div class="hs-search-field__bar">
          <form action="https://www.bjss.com/hs-search-results">
            <input type="text" class="hs-search-field__input" name="term" autocomplete="off" placeholder="Search …">
          </form>
          <span class="close-search"></span>
        </div>
        <ul class="hs-search-field__suggestions"></ul>
      </div>
      
    </div>
  </div>
</header></div>
      

      
<main class="body-container-wrapper blog blog_post engineering_post">
  <div class="blog-wrapper">
    <div id="hs_cos_wrapper_post_banner" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><div class="blog-banner post-banner engineering__banner" style="background-image: url(../hubfs/Banner_De-Mystifying-Compliers.jpg)">
  <div class="content-wrapper">
    <div class="post-banner-col post-banner-col7">
      <div class="post-banner-rich-text">
        <h4><span id="hs_cos_wrapper_name" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_text" style="" data-hs-cos-general-type="meta_field" data-hs-cos-type="text">De-Mystifying Compilers</span></h4>
        <p>By Andrew Bennett, Technical Architect at BJSS</p>
      </div>
    </div>
    
    <div class="post-banner-col post-banner-col5">
      <div class="post-banner-image">
        <span class="post-banner-img">
          <img src="../hubfs/Andrew-Bennett-656x656-1.jpg" alt="Andrew Bennett">
        </span>
      </div>
    </div>
    
  </div>
</div></div>
  </div>
  <div class="blog-single-wrapper">
    <div class="content-wrapper ">
      <div class="blog-post__body">
        <span id="hs_cos_wrapper_post_body" class="hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text" style="" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><h4>Background</h4>
<p>Andrew’s interest for computing started when he learnt to program on his Atari 800XL as a child.&nbsp;&nbsp;He has worked in research labs for computer vision and machine learning and has produced toolchains for embedded systems.&nbsp;&nbsp;More recently, with BJSS, he has worked on frontend and backend systems for medical and financial clients.&nbsp;</p>
<!--more--><p>Outside work he is a keen runner and enjoys spending time with his family and taking their dog out for walks in the countryside.</p>
<p>As developers, we rely on compilers everyday to produce and run our programs.&nbsp;&nbsp;They are often seen as a blackbox so it can be hard to understand code generation issues, for example if the code is not performing as expected.&nbsp;&nbsp;This article will explore their inner workings, to provide you with a greater understanding of how they work.</p>
<p>&nbsp;</p>
<h4>What is a compiler?</h4>
<p>A compiler translates a set of source files into a program that can be run. This breaks down into four main areas:</p>
<ul>
<li>Checking the source files are valid.</li>
<li>Translating the program into a set of operations.</li>
<li>Optimising the program.</li>
<li>Generating code that can be run on the target machine.</li>
</ul>
<p>To check the source files are valid the compiler needs to perform&nbsp;<strong>syntax analysis</strong>&nbsp;followed by a&nbsp;&nbsp;<strong>semantic analysis.</strong> The source files are then translated into&nbsp;an&nbsp;<strong>intermediate language</strong>&nbsp;which describes the program using a set of operations. Once in this form the program can be optimised by performing a set of&nbsp;<strong>code optimisations</strong>. Finally, code can be generated for a target machine by performing&nbsp;<strong>machine code generation</strong>&nbsp;to translate the intermediate language into target machine instructions.</p>
<p>Let's look at each stage in more detail.</p>
<div style="height: 40px;">&nbsp;</div>
<h4>Syntax analysis</h4>
<p>Syntax analysis checks that the source file follows the grammar of the programming language. It is performed in two stages. Firstly,&nbsp;<strong>tokenization</strong>&nbsp;, which breaks the program down into its language elements (tokens) such as symbols, numbers, and keywords.&nbsp;</p>
<p>Next,&nbsp;<strong>parsing</strong>&nbsp;is performed. This takes the set of tokens and tries to match them against a set of rules describing the grammar of the programming language. If parsing is successful a&nbsp;<strong>parse tree</strong>&nbsp;is generated.&nbsp;</p>
<p>Below is an example grammar that describes simple arithmetic expressions. The CONSTANT token will match numbers and the VARIABLE token will match variable names. The Expr grammar will then match adding, subtracting, multiplying or dividing variables or constants.</p>
<p><img src="../hs-fs/hubfs/grammar-355x268d741.png?width=355&amp;name=grammar-355x268.png" alt="grammar-355x268" width="355" loading="lazy" style="width: 355px;" srcset="https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=178&amp;name=grammar-355x268.png 178w, https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=355&amp;name=grammar-355x268.png 355w, https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=533&amp;name=grammar-355x268.png 533w, https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=710&amp;name=grammar-355x268.png 710w, https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=888&amp;name=grammar-355x268.png 888w, https://www.bjss.com/hs-fs/hubfs/grammar-355x268.png?width=1065&amp;name=grammar-355x268.png 1065w" sizes="(max-width: 355px) 100vw, 355px"></p>
<p>For example, when the following expression a+b*2 is parsed using the previous grammar the following parse tree is generated.</p>
<p><img src="../hs-fs/hubfs/parsetree-537x372961a.png?width=537&amp;name=parsetree-537x372.png" alt="parsetree-537x372" width="537" loading="lazy" style="width: 537px;" srcset="https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=269&amp;name=parsetree-537x372.png 269w, https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=537&amp;name=parsetree-537x372.png 537w, https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=806&amp;name=parsetree-537x372.png 806w, https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=1074&amp;name=parsetree-537x372.png 1074w, https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=1343&amp;name=parsetree-537x372.png 1343w, https://www.bjss.com/hs-fs/hubfs/parsetree-537x372.png?width=1611&amp;name=parsetree-537x372.png 1611w" sizes="(max-width: 537px) 100vw, 537px"></p>
<p>Next,&nbsp;&nbsp;we need to convert the parse tree into a simpler tree-based representation called an <em>Abstract Syntax Tree (AST)</em><span>. This is a reduced form of the parse tree, which more closely matches the actual program making it is easier to use in the next stages of the compiler. The AST for our parse tree would look like this.<br></span></p>
<p><span><img src="../hs-fs/hubfs/ast-370x274c886.png?width=370&amp;name=ast-370x274.png" alt="ast-370x274" width="370" loading="lazy" style="width: 370px;" srcset="https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=185&amp;name=ast-370x274.png 185w, https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=370&amp;name=ast-370x274.png 370w, https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=555&amp;name=ast-370x274.png 555w, https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=740&amp;name=ast-370x274.png 740w, https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=925&amp;name=ast-370x274.png 925w, https://www.bjss.com/hs-fs/hubfs/ast-370x274.png?width=1110&amp;name=ast-370x274.png 1110w" sizes="(max-width: 370px) 100vw, 370px"></span></p>
<p>&nbsp;</p>
<h4>Semantic analysis</h4>
<img src="../hubfs/cil-402x985.webp" alt="cil-402x985" width="402" loading="lazy" style="width: 402px; float: right;">
<p>Semantic analysis checks that the “meaning” of the program is valid; for example, “Time flies like an arrow” is&nbsp;grammatically correct, but not semantically correct. Semantic analysis is typically only performed for static languages like C# and Java. One key area it is used for is type checking. This relies on the type information of things like variables, methods and classes collected during the syntax analysis phase, which is stored in a symbol table. Type checking checks that:</p>
<ul>
<li>Variables are defined before they are used.&nbsp;</li>
<li>Variables are assigned data of the correct type.&nbsp;</li>
<li>Expressions are using constants or variables of the content type.&nbsp;</li>
<li>The arguments provided to a method call are of the correct type.&nbsp;</li>
<li>The correct number of arguments are provided to a method call.</li>
</ul>
<p>&nbsp;</p>
<h4>Intermediate language generation</h4>
<p class="">The next stage is to convert the AST into an&nbsp;<strong>intermediate language</strong>&nbsp;which represents the program as a set of computational operations like loads, stores, add or multiply. The compiler translates the AST into the intermediate language by converting each of the&nbsp;sub-nodes&nbsp;into sets of intermediate language operations. A common intermediate language approach is to use bytecode which represents a set of simple operations that operate on a stack. For example, in dynamic languages Python uses Python bytecode, and Ruby uses YARV. In static languages Java uses Bytecode and .Net uses Common Intermediate Language (CIL).</p>
<p class="">As an example, to the right we can see the CIL generated for the following C# program:</p>
<p class=""><img src="../hs-fs/hubfs/main-329x188e320.png?width=329&amp;name=main-329x188.png" alt="main-329x188" width="329" loading="lazy" style="width: 329px;" srcset="https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=165&amp;name=main-329x188.png 165w, https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=329&amp;name=main-329x188.png 329w, https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=494&amp;name=main-329x188.png 494w, https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=658&amp;name=main-329x188.png 658w, https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=823&amp;name=main-329x188.png 823w, https://www.bjss.com/hs-fs/hubfs/main-329x188.png?width=987&amp;name=main-329x188.png 987w" sizes="(max-width: 329px) 100vw, 329px"></p>
<p>Let’s examine the main set of bytecode operations highlighted in green. The first two operations are for setting up the value of variable a. The value of 2 is pushed onto the stack using the ldc operation, and then it is popped off the stack and stored in local slot 0 using the stloc operation. The next two bytecode operations perform the same sequence to set up the value for variable b storing it in local slot 1.&nbsp;</p>
<p>Now we need to perform the calculation of variable&nbsp;c. Firstly, we need to perform the addition operation. using the&nbsp;ldloc&nbsp;operation we push back onto the stack the values of variables&nbsp;a&nbsp;and&nbsp;b. Then we pop them both off the stack and add them together using&nbsp;add&nbsp;and push the result back onto the stack.</p>
<p>Next comes the multiplication operation. We push the value of 2 using the&nbsp;ldc&nbsp;operation onto the stack. Then we pop off the previous addition result and the value 2 from the stack and multiply them together using the&nbsp;mul&nbsp;operation, pushing this result back onto the stack.&nbsp;</p>
<p>Next, to store the result in variable c we use the&nbsp;stloc&nbsp;operation to pop the value off the stack and store it in local slot 2. To return the result back to the caller of this function we push the value of variable&nbsp;c&nbsp;back onto the stack using&nbsp;ldloc&nbsp;then pop it off the stack and store in local slot 3 using&nbsp;stloc.&nbsp;</p>
<p>Finally, we jump to where we will be returning from the function (using the&nbsp;br&nbsp;operation), here we push the value of the return result back onto the stack using&nbsp;ldloc&nbsp;and use the&nbsp;ret&nbsp;operation to pop the result off the stack and return this back to the calling function.</p>
<p>&nbsp;</p>
<h4>Code optimisers</h4>
<div style="height: 12px;">&nbsp;</div>
<p>Once the program has been translated into an intermediate language there are typically optimisations that can be applied, so that when it is converted into the final set of target machine instructions their performance and/or size is improved. Some example optimisations include:</p>
<ul>
<li>Removing repeated code</li>
<li>Removing unused or dead code&nbsp;</li>
<li>Constant propagation&nbsp;</li>
<li>Constant folding&nbsp;</li>
<li>Loop unrolling&nbsp;</li>
<li>Removing redundant load/stores&nbsp;</li>
</ul>
<p>Constant propagation involves replacing variables which have a constant value with their actual value. For example,&nbsp;a = 6; b = a + 2&nbsp;would become&nbsp;a = 6; b = 6 + 2.</p>
<p>Constant folding involves reducing arithmetic expressions involving constant values with the final resulting value. For example,&nbsp;a = (6 * 5) + 4&nbsp;would become&nbsp;a = 34.</p>
<p>Loop unrolling involves changing code that uses a loop into a repeated set of operations. This means that there is less of a branch penalty when the code is run.&nbsp;For example:</p>
<p><img src="../hs-fs/hubfs/for-323x5315d7.png?width=323&amp;name=for-323x53.png" alt="for-323x53" width="323" loading="lazy" style="width: 323px;" srcset="https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=162&amp;name=for-323x53.png 162w, https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=323&amp;name=for-323x53.png 323w, https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=485&amp;name=for-323x53.png 485w, https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=646&amp;name=for-323x53.png 646w, https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=808&amp;name=for-323x53.png 808w, https://www.bjss.com/hs-fs/hubfs/for-323x53.png?width=969&amp;name=for-323x53.png 969w" sizes="(max-width: 323px) 100vw, 323px"></p>
<p>Would become:</p>
<p><img src="../hs-fs/hubfs/a0-154x132ae0f.png?width=154&amp;name=a0-154x132.png" alt="a0-154x132" width="154" loading="lazy" style="width: 154px;" srcset="https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=77&amp;name=a0-154x132.png 77w, https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=154&amp;name=a0-154x132.png 154w, https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=231&amp;name=a0-154x132.png 231w, https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=308&amp;name=a0-154x132.png 308w, https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=385&amp;name=a0-154x132.png 385w, https://www.bjss.com/hs-fs/hubfs/a0-154x132.png?width=462&amp;name=a0-154x132.png 462w" sizes="(max-width: 154px) 100vw, 154px"></p>
<p>&nbsp;</p>
<h4>Generating target machine code</h4>
<div style="height: 12px;">&nbsp;</div>
<p>Machine code generation involves converting the intermediate language into target machine code. One approach is to perform ahead of time compilation. This is the approach used by compilers for languages like C++ or Go. These take intermediate language generated from the source files, optimise it, and map it down onto target machine instructions, outputting the result as a binary file.</p>
<p>An alternative approach used by languages like C# and Java is to run the bytecode inside a virtual machine. Initially the bytecode is interpreted by sequentially performing each bytecode operation. The virtual machine also uses a stack and a frame to store the current state of the program. In some virtual machines, whilst running the bytecode it will identify regions of ‘hot’ bytecode that are executed many times. These regions are then sent to a Just In Time (JIT) compilew which will translate the bytecode into target machine code instructions. The compiler will also try to apply optimisations during the translation. When these regions of code are executed the target machine instructions are run rather than running the bytecode through the interpreter which improves performance.</p>
<p>The x86 machine code below shows the JITed code for the bytecode in the previous example. The highlighted machine instructions in green are doing the actual work to perform the calculations. In the x86 instruction set rax and eax represent different sections of the ax register. For simplicity I will just use ax in this explanation. Firstly, we push the value of 3 onto the stack and then load it back into register ax. Then, using the lea (load effective address) instruction we double ax and add 4 to it. Finally, we return from the function using ret and the caller of the function will be able to access the result in register ax.</p>
<p>Note that a lot of the redundant bytecode operations that load to and from the local storage have been removed. Also, the addition and multiplication operations have been combined together into one machine instruction to improve speed and reduce the size of the code.</p>
<p><img src="../hs-fs/hubfs/bytecode-431x3628c89.png?width=431&amp;name=bytecode-431x362.png" alt="bytecode-431x362" width="431" loading="lazy" style="width: 431px;" srcset="https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=216&amp;name=bytecode-431x362.png 216w, https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=431&amp;name=bytecode-431x362.png 431w, https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=647&amp;name=bytecode-431x362.png 647w, https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=862&amp;name=bytecode-431x362.png 862w, https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=1078&amp;name=bytecode-431x362.png 1078w, https://www.bjss.com/hs-fs/hubfs/bytecode-431x362.png?width=1293&amp;name=bytecode-431x362.png 1293w" sizes="(max-width: 431px) 100vw, 431px"></p>
<h4>Conclusion</h4>
<div style="height: 12px;">&nbsp;</div>
<p>This article has covered the different stages a compiler goes through to be able to run your program on a target machine and has shown you examples of what happens at each stage. In a follow-up article we will explore code performance in a more detail, and will look at the compilers used for dynamic programming languages and how they produce high performance code.</p></span>
      </div>
    </div>
  </div>
  <div id="hs_cos_wrapper_post_content" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><div class="enginnering-post-content">
  
</div></div>
</main>


      
      <div data-global-resource-path="BJSS_May2021/templates/partials/footer.html"><footer class="footer">
  <div class="footer__inner">
    <div class="footer__container main__footer">
      <div class="footer__column footer__column1">
        <div class="footerTitle">
          <div id="hs_cos_wrapper_footerTitle" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-rich_text" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><span id="hs_cos_wrapper_footerTitle_" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_rich_text" style="" data-hs-cos-general-type="widget" data-hs-cos-type="rich_text"><h4 style="color: #fff">EXPANDING<br>POSSIBILITIES</h4></span></div>
        </div>
        <div class="footerSocial">
          <div id="hs_cos_wrapper_footerSocial" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><ul class="social-share">
  <li class="socil-icon social-twitter">
    <a href="https://twitter.com/bjssltd" title="Follow on Twitter" target="_blank" class="icon"></a>
  </li>
  <li class="socil-icon social-linkedin">
    <a href="https://uk.linkedin.com/company/bjss" title="Follow on LinkedIn" target="_blank" class="icon"></a>
  </li>
  <li class="socil-icon social-instagram">
    <a href="http://www.instagram.com/bjssltd" title="Follow on Instagram" target="_blank" class="icon"></a>
  </li>
  <li class="socil-icon social-youtube">
    <a href="https://www.youtube.com/channel/UCUWB9XUNt_g_YGWIjneXuSg" title="Follow on Youtube" target="_blank" class="icon"></a>
  </li>
</ul></div>
        </div>
        <div class="footerImage">
          <div id="hs_cos_wrapper_footerImage" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-linked_image" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module">
    






  



<span id="hs_cos_wrapper_footerImage_" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_linked_image" style="" data-hs-cos-general-type="widget" data-hs-cos-type="linked_image"><img src="../hs-fs/hubfs/Princess-Award_%26_Queens-Awardc48d.png?width=1000&amp;height=563&amp;name=Princess-Award_%26_Queens-Award.png" class="hs-image-widget " width="1000" height="563" alt="Princess-Award_&amp;_Queens-Award" title="Princess-Award_&amp;_Queens-Award" srcset="https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=500&amp;height=282&amp;name=Princess-Award_%26_Queens-Award.png 500w, https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=1000&amp;height=563&amp;name=Princess-Award_%26_Queens-Award.png 1000w, https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=1500&amp;height=845&amp;name=Princess-Award_%26_Queens-Award.png 1500w, https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=2000&amp;height=1126&amp;name=Princess-Award_%26_Queens-Award.png 2000w, https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=2500&amp;height=1408&amp;name=Princess-Award_%26_Queens-Award.png 2500w, https://www.bjss.com/hs-fs/hubfs/Princess-Award_%26_Queens-Award.png?width=3000&amp;height=1689&amp;name=Princess-Award_%26_Queens-Award.png 3000w" sizes="(max-width: 1000px) 100vw, 1000px"></span></div>
        </div>
      </div>
      <div class="footer__column footer__column2">
        <div class="footer__column_inner">
          <div class="footer-navigation">
            <span id="hs_cos_wrapper_footer_menu" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_menu" style="" data-hs-cos-general-type="widget" data-hs-cos-type="menu"><div id="hs_menu_wrapper_footer_menu" class="hs-menu-wrapper active-branch no-flyouts hs-menu-flow-horizontal" role="navigation" data-sitemap-name="default" data-menu-id="47366551648" aria-label="Navigation Menu">
 <ul role="menu">
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../contact/index.html" role="menuitem">Contact BJSS</a></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../news.html" role="menuitem">News</a></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../governance/index.html" role="menuitem">Governance</a></li>
  <li class="hs-menu-item hs-menu-depth-1" role="none"><a href="../website-privacy-policy/index.html" role="menuitem">Privacy notice</a></li>
 </ul>
</div></span>
          </div>
        </div>
      </div>
      <div class="footer__column footer__column3">
        <div class="footer__column_inner">
          <div class="footer__search">
            <div class="hs-search-field">
              <div class="hs-search-field__bar">
                <form action="https://www.bjss.com/hs-search-results">
                  <input type="text" class="hs-search-field__input" name="term" autocomplete="off" placeholder="Search BJSS">
                  <input type="submit" value="Search" class="searchsubmit" style="">
                </form>
              </div>
              <ul class="hs-search-field__suggestions"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer__container copyright__footer">
      <div class="footer__copyright">
        <div id="hs_cos_wrapper_footer_copyright_text" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_module widget-type-text" style="" data-hs-cos-general-type="widget" data-hs-cos-type="module"><span id="hs_cos_wrapper_footer_copyright_text_" class="hs_cos_wrapper hs_cos_wrapper_widget hs_cos_wrapper_type_text" style="" data-hs-cos-general-type="widget" data-hs-cos-type="text">&nbsp;© 2023 BJSS Limited. Registered in England with company number 2777575 VAT Number GB613295452.&nbsp;‘Enterprise Agile®’ and ‘BJSS Enterprise Agile®’ are registered trademarks of BJSS Limited.</span></div>
      </div>
    </div>
  </div>
</footer>

<span class="back-to-top"></span></div>
      
    </div>
    <script src="../hs/hsstatic/jquery-libs/static-1.4/jquery/jquery-1.11.2.js"></script>
<script src="../hs/hsstatic/jquery-libs/static-1.4/jquery-migrate/jquery-migrate-1.2.1.js"></script>
<script>hsjQuery = window['jQuery'];</script>
<script>
(function () {
    window.addEventListener('load', function () {
        setTimeout(function () {
            var xhr = new XMLHttpRequest();
            xhr.open('POST.html', '/_hcms/perf', true /*async*/);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange = function () {
                // do nothing.
            };
            var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            function populateNetworkInfo(name, connection, info) {
                if (name in connection) {
                    info[name] = connection[name];
                }
            }
            var networkInfo = {};
            if (connection) {
                ['type', 'effectiveType', 'downlink', 'rtt'].forEach(function(name) {
                    populateNetworkInfo(name, connection, networkInfo);
                });
            }
            var perfData = {
                url: location.href,
                portal: 9399653,
                content: 50034951479,
                group: -1,
                connection: networkInfo,
                timing: performance.timing
            };
            xhr.send(JSON.stringify(perfData));
        }, 3000);  // Execute this 3 seconds after onload.
    });
})();
</script>

<script src="../hs-fs/hub/9399653/hub_generated/template_assets/47365698976/1645632663800/BJSS_May2021/js/main.min.js"></script>
<script>
var hsVars = hsVars || {}; hsVars['language'] = 'en';
</script>

<script src="../hs/hsstatic/cos-i18n/static-1.53/bundles/project.js"></script>
<script src="../hs-fs/hub/9399653/hub_generated/module_assets/52098159278/1638279844495/module_52098159278_language_switcher.min.js"></script>

<!-- Start of HubSpot Analytics Code -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "blog-post"]);
_hsq.push(["setCanonicalUrl", "https:\/\/www.bjss.com\/engineering-insights\/de-mystifying-compilers"]);
_hsq.push(["setPageId", "50034951479"]);
_hsq.push(["setContentMetadata", {
    "contentPageId": 50034951479,
    "legacyPageId": "50034951479",
    "contentFolderId": null,
    "contentGroupId": 48313963830,
    "abTestId": null,
    "languageVariantId": 50034951479,
    "languageCode": "en",
    
}]);
</script>

<script type="text/javascript" id="hs-script-loader" async defer src="../hs/scriptloader/9399653.js"></script>
<!-- End of HubSpot Analytics Code -->


<script type="text/javascript">
var hsVars = {
    ticks: 1674411467064,
    page_id: 50034951479,
    
    content_group_id: 48313963830,
    portal_id: 9399653,
    app_hs_base_url: "https://app.hubspot.com",
    cp_hs_base_url: "https://cp.hubspot.com",
    language: "en",
    analytics_page_type: "blog-post",
    analytics_page_id: "50034951479",
    category_id: 3,
    folder_id: 0,
    is_hubspot_user: false
}
</script>


<script defer src="../hs/hsstatic/HubspotToolsMenu/static-1.143/js/index.js"></script>

<!-- Google Tag Manager (noscript) -->
 <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKPDZ5X" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
 <!-- End Google Tag Manager (noscript) -->


<div id="fb-root"></div>
 <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "../../connect.facebook.net/en_GB/all.js#xfbml=1&status=0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="../../platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
 


  
</body>
<!-- Mirrored from www.bjss.com/engineering-insights/de-mystifying-compilers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jan 2023 11:43:24 GMT -->
</html>